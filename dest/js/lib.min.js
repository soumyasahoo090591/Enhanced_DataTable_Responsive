var keyboardConfig={keys:{LEFT:37,UP:38,RIGHT:39,DOWN:40,RETURN:13,ESC:27,TAB:9}};window.accessibilityMixin=function(a,b){return{keys:b.keys,provideAccessibilityFor:function(b){switch(b=a(b),b.prop("tagName").toLowerCase()){case"table":this.applyAccessibilityForTable(b),this.applyKeyboardNavForTable(b)}},applyAccessibilityForTable:function(b){b.attr("tabindex")||b.attr("tabindex","0"),a("thead th",b).each(function(b,c){c=a(c),c.attr("tabindex")||c.attr("tabindex","-1"),c.attr("scope")||c.attr("scope","col")}),a("tbody th",b).each(function(b,c){c=a(c),c.attr("tabindex")||c.attr("tabindex","-1"),c.attr("scope")||c.attr("scope","row")}),a("tbody td",b).each(function(b,c){c=a(c),c.attr("tabindex")||c.attr("tabindex",0===b?"0":"-1")})},applyKeyboardNavForTable:function(b){var c=this,d=!1,e=!0,f=!1;a("tbody td",b).on("focus",function(a){c.checkAndFocus(b)}),b.on("keydown",function(g){var h="input"===g.target.tagName.toLowerCase();if(0===a("tbody td[tabindex='-1']",b).length&&(a("tbody td",b).on("focus",function(a){c.checkAndFocus(b)}),c.applyAccessibilityForTable(b)),!g.shiftKey){if(h&&g.keyCode===c.keys.RETURN)return d=!0,void(e=!1);if(h&&g.keyCode===c.keys.ESC)return d=!1,void(e=!0);if(e&&g.keyCode!==c.keys.TAB){var i=a(".active",b),j=a("tr.active-row",b);i.attr("tabindex","-1"),g.keyCode==c.keys.LEFT&&(i.removeClass("active"),i=(0===c.prev(i,"td").length?i.parents("tr").find("td").last("td"):c.prev(i,"td")).addClass("active"),c.focus(i)),g.keyCode==c.keys.RIGHT&&(i.removeClass("active"),i=(0===c.next(i,"td").length?i.parents("tr").find("td").first("td"):c.next(i,"td")).addClass("active"),c.focus(i)),g.keyCode==c.keys.UP&&(i.removeClass("active"),i=(0===j.removeClass("active-row").prev("tr").length?j.parents("tbody").find("tr").last("tr"):j.prev("tr")).addClass("active-row").find("td").eq(i[0].cellIndex).addClass("active"),c.focus(i)),g.keyCode==c.keys.DOWN&&(i.removeClass("active"),i=(0===j.removeClass("active-row").next("tr").length?j.parents("tbody").find("tr").first("tr"):j.next("tr")).addClass("active-row").find("td").eq(i[0].cellIndex).addClass("active"),c.focus(i))}else g.keyCode!=c.keys.TAB||f||(a("thead th:first").focus(),f=!0)}}),b.on("keyup",function(a){})},next:function(a,b){var c=a[0]?a[0].cellIndex+1:"";return a.parents("tr").find(b).eq(c)},prev:function(a,b){var c=a[0]?a[0].cellIndex-1:"";return a.parents("tr").find(b).eq(c)},checkAndFocus:function(b){var c=a("tbody td.active",b),d=a("tbody tr.active-row",b);0===d.length&&(d=a("tbody tr:first",b).addClass("active-row")),0===c.length&&(c=a("tbody tr:first td:first",b).addClass("active"),this.focus(c))},focus:function(a){var b=a.find("input");a.attr("tabindex","0"),0===b.length?a.focus():b.select().focus()}}}(jQuery,keyboardConfig);